<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>kevinnls learning www</title>
	<meta name="author" content="Kevin Samuel, developer@kevinnlsamuel.com">
	<meta name="description" content="learning to make for the world wide web using vanilla HTML, CSS, JS">

	<script type="module">
	    const moduleScope = 'hello, world! this value is not added to the global scope!';

	    const counter = document.getElementById('counter');

	    import { incrementCounter, decrementCounter } from './module.js';
	    import { storeToLocal } from './storagehelper.js'

	    const observeAndStoreToLocal = new MutationObserver(storeToLocal);

	    observeAndStoreToLocal.observe(counter.firstChild, { characterData: true, childList: true });

	    document.getElementById('decCounter').addEventListener('click', decrementCounter);
	    document.getElementById('incCounter').addEventListener('click', incrementCounter);
	</script>

	<script type="module">
	    import { initialCounter } from './module.js';
	    import { increasingOpacityFrames, decreasingOpacityFrames } from './opacityAnimations.js';

	    const spinnerElement = document.getElementById('spinner');

		requestAnimationFrame(()=>{
		    spinnerElement.animate(decreasingOpacityFrames, 500);
		    setTimeout(() => {
			requestAnimationFrame(() => {
			    spinnerElement.style.display = 'none';
			    counter.animate(increasingOpacityFrames, 500);
			    counter.firstChild.textContent = initialCounter;
			})
		    },500)
		})
	</script>

	<script type="module">
	    import { initialCounter } from './module.js';
	    console.log('module imports are executed only once?');
	    try {
		console.log(valueHiddenInModule);
	    } catch(e) { console.warn('well, duh. couldn\'t find that value hidden in module')};
	</script>

	<style>
	    :root {
		color-scheme: dark light;
		box-sizing: border-box;
		font-size: 32pt;
		font-family: sans-serif;
	    }
	    body {
		margin: 0px;
		min-height: 100vh;
		min-height: 100dvh;
		display: grid;
		place-items: center;
	    }
	    #counter-container {
		width: clamp(50%,450px,90%);
		display: grid;
		align-items: center;
		grid-template-columns: 1fr 2fr 1fr;
		grid-gap: 0.5ch;
		position: relative;
		left: 0;
		top: 0;
	    }
	    .control {
		font-size: 1rem;
		width: auto;
		height: auto;
	    }
	    #counter {
		text-align: center;
	    }
	    #center-pane {
		position: relative;
		left: 0;
		top: 0;
		display: grid;
		place-items: center;
	    }
	    #spinner {
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		position: absolute;
	    }
	</style>
</head>

<body>

    <section id="counter-container">
	<button id="decCounter"class="control">-</button>
	<span id="counter">
	    <!--to be populated by JS-->
	</span>
	<button id="incCounter" class="control">+</button>

	<svg width="100px" height="100px" id="spinner" fill="none" viewbox="0 0 11 11">
	    <circle stroke="white" stroke-opacity="30%"
		cx="5.5" cy="5.5" r="5"/>
	    <path stroke="hotpink" d="
		    M 5.5 .5
		    a 5 5 90 0 1 5 5
		      ">
		<animateTransform attributeName="transform" attributeType="XML"
		    type="rotate"
		    dur="1s" repeatCount="indefinite"
		    from="0 5.5 5.5"
		    to="360 5.5 5.5"/>
	    </path>
	</svg>
    </section>
</body>

</html>
